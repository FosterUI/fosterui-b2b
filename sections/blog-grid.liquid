{{ 'section-blog-layout.css' | asset_url | stylesheet_tag }}

<div class="blog-grid-wrapper">
  <div class="page-width">
    {% paginate blog.articles by section.settings.posts_per_page %}
      <div class="blog-grid">
        {% for article in blog.articles %}
          <article class="blog-card">
            {%- if article.image -%}
              <div class="card__media">
                <div class="media media--transparent media--hover-effect">
                  <img
                    srcset="{%- if article.image.width >= 375 -%}{{ article.image | image_url: width: 375 }} 375w,{%- endif -%}
                      {%- if article.image.width >= 550 -%}{{ article.image | image_url: width: 550 }} 550w,{%- endif -%}
                      {%- if article.image.width >= 750 -%}{{ article.image | image_url: width: 750 }} 750w,{%- endif -%}
                      {%- if article.image.width >= 1100 -%}{{ article.image | image_url: width: 1100 }} 1100w,{%- endif -%}
                      {%- if article.image.width >= 1500 -%}{{ article.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                      {{ article.image | image_url }} {{ article.image.width }}w"
                    src="{{ article.image | image_url: width: 750 }}"
                    sizes="(min-width: 750px) calc(100vw - 130px) / 2, calc(100vw - 40px)"
                    alt="{{ article.image.alt | escape }}"
                    loading="lazy"
                    width="{{ article.image.width }}"
                    height="{{ article.image.height }}"
                    class="motion-reduce"
                  >
                </div>
              </div>
            {%- endif -%}
            <div class="blog-card__content">
              <h2 class="blog-card__title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h2>
              <div class="blog-card__excerpt">
                {% if article.excerpt.size > 0 %}
                  {{ article.excerpt | strip_html | truncatewords: 20 }}
                {% else %}
                  {{ article.content | strip_html | truncatewords: 20 }}
                {% endif %}
              </div>
              <div class="blog-card__meta">
                {{ article.published_at | date: '%B %d, %Y' }}
              </div>
            </div>
          </article>
        {% endfor %}
      </div>

      {% if paginate.pages > 1 %}
        <div class="pagination-wrapper">
          {{ paginate | default_pagination }}
        </div>
      {% endif %}
    {% endpaginate %}
  </div>
</div>

{% schema %}
{
  "name": "B2B Blog Grid",
  "settings": [
    {
      "type": "range",
      "id": "posts_per_page",
      "min": 3,
      "max": 24,
      "step": 3,
      "label": "Posts per page",
      "default": 9
    }
  ],
  "presets": [
    {
      "name": "B2B Blog Grid"
    }
  ]
}
{% endschema %}
