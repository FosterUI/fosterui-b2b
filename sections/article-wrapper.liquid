{{ 'section-blog-layout.css' | asset_url | stylesheet_tag }}

<section class="article-wrapper-section">
  <div class="article-container">
    
    {% comment %} Iterate through all blocks within this section {% endcomment %}
    {% for block in section.blocks %}
      <div class="article-block" {{ block.shopify_attributes }}>
        
        {% case block.type %}
          
          {% comment %} --- RICH TEXT BLOCK --- {% endcomment %}
          {% when 'rich_text' %}
            <div class="article-content-block rte {% if block.settings.is_references %}block-references{% endif %}">
              {{ block.settings.content }}
            </div>

          {% comment %} --- PILLAR CALLOUT BLOCK --- {% endcomment %}
          {% when 'pillar_callout' %}
            <div class="pillar-link-callout">
              <p>
                {{ block.settings.pillar_link_text }}
                <a href="{{ block.settings.pillar_link_url }}">{{ block.settings.pillar_link_title }}</a>
              </p>
            </div>

          {% comment %} --- AUDIO PLAYER BLOCK --- {% endcomment %}
          {% when 'audio_player' %}
            {% render 'article-audio-player' with block.settings %}

          {% comment %} --- AUTHOR BIO BLOCK --- {% endcomment %}
          {% when 'author_bio' %}
             <div class="article-author-cta">
              {% if block.settings.author_cta_headshot != blank %}
                <div class="article-author-cta__image">
                  <img src="{{ block.settings.author_cta_headshot | image_url: width: 100, height: 100 }}" alt="{{ article.author }}" class="author-cta__headshot" width="100" height="100" loading="lazy">
                </div>
              {% endif %}
              <div class="article-author-cta__content">
                <div class="article-author-cta__bio">
                  <h3>{{ block.settings.author_cta_title }}</h3>
                  <p>{{ block.settings.author_cta_text }}</p>
                </div>
                <div class="article-author-cta__action">
                  <a href="{{ block.settings.author_cta_button_link }}" class="btn-brand btn-brand-primary">
                    {{ block.settings.author_cta_button_label }}
                  </a>
                </div>
              </div>
            </div>

        {% endcase %}
        
      </div>
    {% endfor %}

  </div>
</section>

{% schema %}
{
  "name": "Article Content Wrapper",
  "settings": [],
  "blocks": [
    {
      "type": "rich_text",
      "name": "Rich Text Content",
      "settings": [
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "checkbox",
          "id": "is_references",
          "label": "Style as References (Smaller Text)",
          "default": false
        }
      ]
    },
    {
      "type": "pillar_callout",
      "name": "Pillar Link Callout",
      "limit": 1,
      "settings": [
         {
            "type": "text",
            "id": "pillar_link_text",
            "label": "Intro Text",
            "default": "This article is part of my comprehensive resource:"
        },
        {
            "type": "text",
            "id": "pillar_link_title",
            "label": "Pillar Page Title",
            "default": "The Definitive Guide to AI-Powered B2B on Shopify Plus."
        },
        {
            "type": "url",
            "id": "pillar_link_url",
            "label": "Pillar Page URL"
        }
      ]
    },
    {
      "type": "audio_player",
      "name": "Audio Player",
      "limit": 1,
      "settings": [
        {
            "type": "paragraph",
            "content": "Displays if the 'custom.audio_overview' metafield is populated."
        },
        {
            "type": "text",
            "id": "audio_player_label",
            "label": "Audio Player Label",
            "default": "Listen to the Audio Overview:"
        }
      ]
    },
    {
      "type": "author_bio",
      "name": "Author Bio & CTA",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "author_cta_headshot",
          "label": "Author Headshot (Bio)"
        },
        {
            "type": "text",
            "id": "author_cta_title",
            "label": "Title",
            "default": "About the Author & Expert"
        },
        {
            "type": "textarea",
            "id": "author_cta_text",
            "label": "Bio/Pitch Text",
            "default": "With over a decade of specialized experience deep within the Shopify ecosystem, I am a principal consultant focused exclusively on transforming DTC stores into AI-powered B2B wholesale engines. My methodology leverages this deep expertise to deliver specialized revenue acceleration, velocity, and precision."
        },
        {
            "type": "text",
            "id": "author_cta_button_label",
            "label": "Button Label",
            "default": "Book My $1,950 Roadmap"
        },
        {
            "type": "url",
            "id": "author_cta_button_link",
            "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "B2B Article Content Wrapper"
    }
  ]
}
{% endschema %}