{{ 'section-blog-layout.css' | asset_url | stylesheet_tag }}

{% comment %} Calculate Read Time (Approx 225 WPM). Using ceil filter to round up. {% endcomment %}
{% assign word_count = article.content | strip_html | split: ' ' | size %}
{% assign read_time = word_count | divided_by: 225.0 | ceil %}

<header class="article-header">
  <div class="page-width">
    <div
      class="article-header__content"
      {% if settings.animations_reveal_on_scroll %}
        data-cascade
      {% endif %}
    >
      <h1 
        class="{% if settings.animations_reveal_on_scroll %}scroll-trigger animate--slide-in{% endif %}"
        {% if settings.animations_reveal_on_scroll %}
          style="--animation-order: 1;"
        {% endif %}
      >{{ article.title }}</h1>
      
      <div 
        class="article-header__meta-wrapper{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
        {% if settings.animations_reveal_on_scroll %}
          style="--animation-order: 2;"
        {% endif %}
      >
          {% if section.settings.author_headshot != blank %}
              <img src="{{ section.settings.author_headshot | image_url: width: 60, height: 60 }}" alt="{{ article.author }}" class="article-header__headshot" width="60" height="60" loading="lazy">
          {% endif %}

          <div class="article-header__meta">
              {% if section.settings.show_author %}
                  <span class="article-header__author">{{ article.author }}</span>
                  {% if section.settings.author_title != blank %}
                      <span class="article-header__author-title">{{ section.settings.author_title }}</span>
                  {% endif %}
              {% endif %}
              
              <span class="article-header__date-time">
                  {% if section.settings.show_date %}
                      <span>{{ article.published_at | date: '%B %d, %Y' }}</span>
                  {% endif %}
                  
                  {% comment %} NEW: Display Read Time {% endcomment %}
                  {% if section.settings.show_read_time %}
                      {% if section.settings.show_date %}<span> | </span>{% endif %}
                      <span>{{ read_time }} min read</span>
                  {% endif %}
              </span>
          </div>
      </div>
    </div>

  </div>
</header>

{% schema %}
{
  "name": "Article Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "author_headshot",
      "label": "Author Headshot"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show publication date",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_read_time",
      "label": "Show estimated read time",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_author",
      "label": "Show author",
      "default": true
    },
    {
      "type": "text",
      "id": "author_title",
      "label": "Author title"
    }
  ],
    "presets": [
    {
      "name": "Article Header"
    }
  ]
}
{% endschema %}
